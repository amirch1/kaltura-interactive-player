<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kaltura Interactive Player </title>
</head>
<body>
    <script src="bundle.js" type="text/javascript"></script>
    <script src="./libs/engine.min.js" type="text/javascript"></script>
    <script src="http://cdnapisec.kaltura.com/p/27017/embedPlaykitJs/uiconf_id/42897631"></script>
    <!-- 350 x 197 / 260 x 146 / 500 x 281 / 150 x 84 ⬇ ︎-->
    <style>
        #player {
            width:350px;
            height:197px;
        }
    </style>
<div id="player"></div>
<div id="logDiv" style="width: 450px;height: 100%;position: absolute;left:650px;top:0"></div>
<script>
	var config = {
		session:{
			// ks: "MjVkYTQyMDY1OWNhYjhkNjNlMzY1N2QzOWFhNGRlYTkzODE3YjM3NXwyNzAxNzsyNzAxNzsxNTM3OTQ5MjUyOzI7NzA3OTtfX0FETUlOX18yNjY4NzsqLGRpc2FibGVlbnRpdGxlbWVudA=="
		},
		targetId: 'player',
		playback:{
			autoplay:true,
			preload:"auto"
		},

		provider: {
			partnerId: 27017
		},

        rapt:{
			debug:true,
            bufferNextNodes: true
        }
	};
    var kip = Kip.setup(config , KalturaPlayer , Rapt); // todo - maybe we can save kalturaPlayer param? // Itay\Oren

    // example of events listening:
    kip.addListener("project:load" , function (a) {
		console.log(">>>>> project:load",a);
	});

    kip.addListener("hotspot:click" , function (a) {
		console.log(">>>>> hotspot:click",a);
	});

	kip.loadMedia({entryId: '1_51tet0hy'}); // 1_4377j2jl   // 1_51tet0hy

    // for debug purposes - these are the buffering events
    var bufferingEvents = ["buffering","destroying","destroyed","done","allBuffered"];

	// logger - debug mode !
	function logDebugMsg(logObject){
        const oneLine = document.createElement("div");
        // mark buffering event in green
        var printStr = logObject.data.originalEvent;
        if( bufferingEvents.some( a => a ===logObject.data.originalEvent) ){
        	// this is a buffering event
            oneLine.style.cssText = "color: green";
            printStr+='<span style="color: purple"> ['+logObject.data.data+']</span>';
        }else{
        	// this is a Rapt event
            oneLine.style.cssText = "color: blue";
            printStr+='<span style="color: purple"> ['+logObject.data.type+']</span>';
            if(logObject.data.type === "hotspot:click"){
				console.log(">>>>>",logObject.data);
                // printStr+='<span style="color: orangered"> ['+logObject.data.payload.hotspot.name+']</span>';
            }
        }
        oneLine.innerHTML = printStr;
        document.getElementById("logDiv").appendChild(oneLine);
    }

</script>
</body>
</html>
